(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{512:function(e,n,s){"use strict";s.r(n);var _=s(19),t=Object(_.a)({},(function(){var e=this,n=e.$createElement,s=e._self._c||n;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h2",{attrs:{id:"_1-èƒŒæ™¯"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-èƒŒæ™¯"}},[e._v("#")]),e._v(" 1. èƒŒæ™¯")]),e._v(" "),s("p",[e._v('ä¸ç®¡æ˜¯å…¨æ–‡æœç´¢å¼•æ“ï¼Œè¿˜æ˜¯å‚ç›´æœç´¢ç³»ç»Ÿä¸­ï¼Œå½“ç”¨æˆ·åœ¨æœç´¢ğŸ”è¾“å…¥æ¡†ä¸­è¾“å…¥å‡ ä¸ªå­—çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨ä¸‹æ¥ä¸€äº›è¯å»è‡ªåŠ¨è¡¥å…¨ç”¨æˆ·å¯èƒ½è¦æœçš„è¯è¯­ï¼Œè¿™éƒ¨åˆ†çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬ç§°ä½œæœç´¢å»ºè®®å™¨çš„åŠŸèƒ½ï¼ˆè‹±æ–‡å«åš"suggest"ï¼‰ã€‚æœ¬æ–‡å°†ä»‹ç»ä¸‹ç›®å‰ä¸»æµçš„æœç´¢å»ºè®®å™¨çš„åšæ³•ï¼Œå¹¶ä¸”ç»™å‡ºäº†ä¸€ä¸ªæˆ‘ä»¬è®¤ä¸ºæ›´å¥½çš„æœç´¢å»ºè®®å™¨çš„åšæ³•ã€‚')]),e._v(" "),s("h2",{attrs:{id:"_2-æœç´¢å»ºè®®å™¨çš„æŒ‡å¯¼åŸåˆ™"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-æœç´¢å»ºè®®å™¨çš„æŒ‡å¯¼åŸåˆ™"}},[e._v("#")]),e._v(" 2. æœç´¢å»ºè®®å™¨çš„æŒ‡å¯¼åŸåˆ™")]),e._v(" "),s("p",[e._v("è¿™é‡Œï¼Œæˆ‘ä»¬ç»™å‡ºå¦‚ä¸‹"),s("strong",[e._v("æœç´¢è”æƒ³è¯æŒ‡å¯¼åŸåˆ™")]),e._v("ï¼š")]),e._v(" "),s("ol",[s("li",[e._v("æœç´¢è”æƒ³è¯çš„ä¸ªæ•°æ˜¯"),s("strong",[e._v("éå¸¸æœ‰é™")]),e._v("çš„ï¼Œæ‰€ä»¥å¿…é¡»å°½é‡æœ‰æ•ˆ")]),e._v(" "),s("li",[e._v("æœç´¢è”æƒ³è¯åº”è¯¥æ˜¯èƒ½å¤Ÿ"),s("strong",[e._v("æœ€è´´è¿‘ç”¨æˆ·")]),e._v("æƒ³è¦çš„ç»“æœ")]),e._v(" "),s("li",[e._v("æœç´¢è”æƒ³å‡ºæ¥çš„è¯åº”è¯¥æ˜¯èƒ½å¤Ÿ**99%**æœç´¢åˆ°å•†å“")]),e._v(" "),s("li",[e._v("æœç´¢è”æƒ³è¯èƒ½å¤Ÿå¸®ç”¨æˆ·"),s("strong",[e._v("çº æ­£")]),e._v("ä¸€äº›é”™è¯¯")])]),e._v(" "),s("h2",{attrs:{id:"_3-æœç´¢å»ºè®®å™¨å®ç°åŠŸèƒ½"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-æœç´¢å»ºè®®å™¨å®ç°åŠŸèƒ½"}},[e._v("#")]),e._v(" 3.  æœç´¢å»ºè®®å™¨å®ç°åŠŸèƒ½")]),e._v(" "),s("p",[e._v("åœ¨è¿™éƒ¨åˆ†æˆ‘ä»¬ç»™å‡ºäº†æœç´¢å»ºè®®å™¨éœ€è¦å®ç°çš„åŠŸèƒ½ï¼Œè¿™éƒ¨åˆ†åŠŸèƒ½ä¸ä»…æ˜¯ç¨‹åºå‘˜éœ€è¦è€ƒè™‘èƒ½å¤Ÿå®ç°çš„åŠŸèƒ½ï¼Œä¹Ÿå¯ä»¥ç”¨äºæµ‹è¯•ç”¨äºè¿›è¡ŒéªŒè¯æœç´¢å»ºè®®å™¨çš„åŠŸèƒ½æ˜¯å¦èƒ½å¤Ÿæ»¡è¶³åŸºæœ¬çš„ä½¿ç”¨è¦æ±‚ã€‚")]),e._v(" "),s("p",[e._v("å…·ä½“ä¾‹å­å¦‚ä¸‹ï¼š")]),e._v(" "),s("ol",[s("li",[s("p",[s("code",[e._v("è‹¹æœ")]),e._v('   =ã€‹ åœ¨Aå¸‚ï¼Œä¸åº”è¯¥å‡ºç°"è‹¹æœé†‹"ï¼Œåœ¨æ·±åœ³å’Œå¹¿å·åº”è¯¥å‡ºç°â€œè‹¹æœé†‹â€ï¼ˆ å› ä¸ºâ€œè‹¹æœé†‹â€åªåœ¨å¹¿å·å’Œæ·±åœ³æœ‰å–ï¼‰å³æœç´¢å»ºè®®è¯å…·æœ‰'),s("strong",[e._v("åŒºåŸŸæ€§")])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("å¹³æœ")]),e._v('  =ã€‹ çº é”™æˆ"è‹¹æœ"ï¼Œå³æ‹¼éŸ³çº é”™')])]),e._v(" "),s("li",[s("p",[s("code",[e._v("PingGUO")]),e._v("=> å‡ºç°è‹¹æœï¼Œå³å½’ä¸€åŒ–è¾“å…¥è¯")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("pinguo")]),e._v(" =ã€‹å‡ºç°è‹¹æœï¼Œå³åé¼»éŸ³çº é”™")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("pg")]),e._v("  =>  å‡ºç°pgå¼€å¤´çš„æ‹¼éŸ³çš„å‰ç¼€ï¼Œå³é¦–å­—æ¯è¿”å›")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("è™¾n")]),e._v(" =ã€‹ä¸åº”è¯¥å‡ºç°â€œé²œèŠ±â€ï¼Œå³ä¸èƒ½å°†è™¾nï¼Œè½¬æˆxianå»æŸ¥è¯¢")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("è™¾r")]),e._v(" =ã€‹ å‡ºç°â€œè™¾ä»â€ï¼Œå³æ±‰å­—å’Œé¦–å­—æ¯å¯å‡ºç°æ­£ç¡®çš„è¯")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("é•¿få¥¶")]),e._v(" => ä¸å‡ºç°ç»“æœï¼Œè¿™é‡Œä¸å‡ºç°æ˜¯å› ä¸ºè¦æ±‰å­—å’Œå­—æ¯è¦è¿ç€ï¼Œä¸èƒ½ä¸­é—´æ’å…¥å­—æ¯")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("chanfu")]),e._v(" "),s("code",[e._v("zhangfu")]),e._v("=ã€‹åº”è¯¥å¯ä»¥å‡ºç°â€œé•¿å¯Œâ€ï¼Œå³æ”¯æŒå¤šéŸ³å­—æœç´¢")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("Kafeii")]),e._v(" =ã€‹ å‡ºç°å’–å•¡ï¼ˆåŸºäºç¼–è¾‘è·ç¦»è¿›è¡Œçº æ­£ï¼Œæ¨èå¤§äº5ä¸ªå­—æ¯æ‰è¿›è¡Œï¼‰")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("ç™½èåœ")]),e._v("ã€"),s("code",[e._v("ç™½ç½—åœ")]),e._v("  =ã€‹ åªå‡ºç°"),s("code",[e._v("ç™½èåœ")]),e._v("   çš‡ä¸Šçš‡  ç…Œä¸Šç…Œçš„é—®é¢˜ï¼Œå³å»ºè®®è¯åªå‡ºç°æ­£ç¡®çš„è¯")])]),e._v(" "),s("li",[s("p",[e._v("å›—"),s("code",[e._v("=> çº é”™æˆ")]),e._v("å£`ï¼Œå‡ºç°å£ç½©ç›¸å…³çš„åè¯ï¼Œå³æŠŠæ‰‹å†™é”™è¯¯çš„è¯èƒ½å¤Ÿçº æ­£è¿‡æ¥")]),e._v(" "),s("p",[s("code",[e._v("ç¥™")]),e._v(" => çº é”™æˆ "),s("code",[e._v("è¢œ")])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("ç‰›å¥¶")]),e._v(' =ã€‹ æ·±åœ³åœ°åŒºä¼šå‡ºç°"ç‡•å¡˜ç‰›å¥¶"ç›¸å…³ï¼Œé•¿æ²™åœ°åŒºå‡ºç°"èŠ±å›­ç‰›å¥¶"')])]),e._v(" "),s("li",[s("p",[s("code",[e._v("è˜‹æœ")]),e._v(" =>  ç¹ä½“å­—ä¹Ÿèƒ½å¤Ÿæœç´¢å‡ºç»“æœï¼Œè¿™ä¸ªä¹Ÿæ˜¯é€šè¿‡è¯å½’ä¸€åŒ–å¤„ç†")])])]),e._v(" "),s("h2",{attrs:{id:"_4-æœç´¢å»ºè®®è¯éœ€è¦è€ƒè™‘çš„å› ç´ "}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-æœç´¢å»ºè®®è¯éœ€è¦è€ƒè™‘çš„å› ç´ "}},[e._v("#")]),e._v(" 4.  æœç´¢å»ºè®®è¯éœ€è¦è€ƒè™‘çš„å› ç´ ")]),e._v(" "),s("ol",[s("li",[e._v("å»ºè®®è¯çš„æ¥æºå¯ä»¥æ˜¯å•†å“çš„åˆ†ç±»åç§°ã€å“ç‰Œåç§°ã€çƒ­æœè¯ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€äº›ç»„åˆè¯ï¼Œè¿˜å¯ä»¥æ˜¯ä¸€äº›è‡ªå®šä¹‰æ·»åŠ çš„è¯ã€‚")]),e._v(" "),s("li",[e._v('æœç´¢å»ºè®®è¯éœ€è¦è€ƒè™‘å»é‡ï¼Œæ¯”å¦‚ï¼šâ€œQQâ€å’Œ"qq"åº”è¯¥æ˜¯ç›¸åŒçš„ã€‚')]),e._v(" "),s("li",[e._v("æœç´¢å»ºè®®è¯æ¯ä¸ªè¯å…³è”çš„å•†å“ä¸ªæ•°ï¼Œä¸ºäº†é¿å…å¯¹ç”¨æˆ·æœç´¢çš„å½±å“ã€‚å› æ­¤åœ¨å‡Œæ™¨æ‰§è¡Œï¼Œå¹¶ä¸”ä½¿ç”¨å•çº¿ç¨‹è°ƒç”¨ã€‚ï¼ˆä½¿ç”¨Multi search ä¸­çš„countï¼Œä»¥åŠæ‰¹é‡æ’å…¥ï¼‰")]),e._v(" "),s("li",[e._v("æœç´¢å»ºè®®æœåŠ¡ï¼Œæ€è·¯è¿˜æ˜¯å…ˆæŸ¥ç¼“å­˜ï¼Œæ˜¯å¦åŒ¹é…åˆ°ç¼“å­˜çš„è®°å½•ï¼Œå¦‚æœåŒ¹é…åˆ™ç›´æ¥è¿”å›ã€‚å¦åˆ™å»esä¸­è¿›è¡ŒæŸ¥è¯¢ã€‚")]),e._v(" "),s("li",[e._v("è¿”å›ç»“æœä¸ºç©ºçš„ç»“æœï¼Œæ­¤æ—¶éœ€è¦å¢åŠ æ‹¼å†™çº é”™çš„å¤„ç†ã€‚(å¯ä»¥å»ºä¸€ä¸ªçº é”™è¡¨)")])]),e._v(" "),s("h2",{attrs:{id:"_5-åŸºäºes-çš„æœç´¢å»ºè®®å™¨çš„ç”¨æ³•"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-åŸºäºes-çš„æœç´¢å»ºè®®å™¨çš„ç”¨æ³•"}},[e._v("#")]),e._v(" 5. åŸºäºES çš„æœç´¢å»ºè®®å™¨çš„ç”¨æ³•")]),e._v(" "),s("blockquote",[s("p",[e._v("suggesteråŸºæœ¬åŸç†æ˜¯å°†è¾“å…¥çš„æ–‡æœ¬åˆ†è§£ä¸ºtokenï¼Œç„¶ååœ¨ç´¢å¼•çš„å­—å…¸é‡ŒæŸ¥æ‰¾ç›¸ä¼¼çš„termå¹¶è¿”å›ã€‚æ ¹æ®ä½¿ç”¨åœºæ™¯çš„ä¸åŒï¼Œåœ¨Elasticsearché‡Œé¢æ¶‰åŠäº†4ç§ç±»åˆ«çš„suggesterï¼Œåˆ†åˆ«æ˜¯ï¼š")]),e._v(" "),s("ol",[s("li",[e._v("Term Suggester")]),e._v(" "),s("li",[e._v("Phrase Suggester")]),e._v(" "),s("li",[e._v("Completion Suggester")]),e._v(" "),s("li",[e._v("Context Suggester")])])]),e._v(" "),s("p",[e._v("æˆ‘ä»¬ä¾æ¬¡è®²è§£ä¸‹ï¼Œä¸Šè¿°4ä¸­ç±»åˆ«çš„suggesterçš„ç”¨æ³•ã€‚")]),e._v(" "),s("ol",[s("li",[e._v("Term Suggester")])]),e._v(" "),s("p",[e._v("ä¸‰ç§suggest_mode:")]),e._v(" "),s("p",[e._v("missing:å¦‚æœè¯å­˜åœ¨ï¼Œåˆ™ä¸ç»™å‡ºç›¸ä¼¼é¡¹ã€‚")]),e._v(" "),s("p",[e._v("popular :å¦‚æœè¯å­˜åœ¨ï¼Œä¸”æœ‰ç›¸ä¼¼é¡¹ï¼Œåˆ™ç»™å‡ºã€‚")]),e._v(" "),s("p",[e._v("always:ä¸ç®¡tokenæ˜¯å¦å­˜åœ¨è¯å…¸é‡Œï¼Œéƒ½ç»™å‡ºç›¸ä¼¼é¡¹ã€‚")]),e._v(" "),s("p",[e._v("å°è¯•äº†ä¸‹ï¼Œè²Œä¼¼term suggesterå¯¹äºä¸­æ–‡æ˜¯ä¸é€‚ç”¨çš„")]),e._v(" "),s("p",[e._v("ä¸‹é¢è¿™æ®µæ˜¯ä¸­æ–‡çš„ä»£ç ï¼š")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('DELETE blogs\nPUT /blogs/\n{\n  "mappings": {\n    "tech": {\n      "properties": {\n        "body": {\n          "type": "text",\n          "analyzer": "ik_max_word",\n          "search_analyzer": "ik_smart"\n        }\n      }\n    }\n  }\n}\n\nPOST _bulk/?refresh=true\n{ "index" : { "_index" : "blogs", "_type" : "tech" } }\n{ "body": "é•¿å¯Œç‰›å¥¶"}\n{ "index" : { "_index" : "blogs", "_type" : "tech" } }\n{ "body": "é•¿å¯Œå¥¶"}\n{ "index" : { "_index" : "blogs", "_type" : "tech" } }\n{ "body": "å¥¶ç²‰"}\n{ "index" : { "_index" : "blogs", "_type" : "tech" } }\n{ "body": "ç‰›å¥¶"}\n\nPOST _bulk/?refresh=true\n{ "index" : { "_index" : "blogs", "_type" : "tech" } }\n{ "body": "niunai"}\n\n\nPOST _analyze\n{\n  "analyzer": "ik_smart", \n  "text": [\n    "é•¿å¯Œç‰›å¥¶",\n    "é•¿å¯Œå¥¶",\n    "å¥¶ç²‰",\n    "ç‰›å¥¶"\n  ]\n}\n\nPOST /blogs/_search\n{ \n  "suggest": {\n    "my-suggestion": {\n      "text": "niunai",\n      "term": {\n        "suggest_mode": "popular",\n        "field": "body"\n      }\n    }\n  }\n}\n')])])]),s("ol",{attrs:{start:"2"}},[s("li",[e._v("Phrase Suggester")])]),e._v(" "),s("p",[e._v("åœ¨Term Suggesterçš„åŸºç¡€ä¹‹ä¸Šï¼Œä¼šè€ƒè™‘å¤šä¸ªTermä¹‹é—´çš„å…³ç³»ï¼Œæ¯”å¦‚ï¼šæ˜¯å¦åŒæ—¶å‡ºç°åœ¨ç´¢å¼•çš„åŸæ–‡ä¸­ï¼Œç›¸é‚»ç¨‹åº¦ï¼Œä»¥åŠè¯é¢‘ï¼Œ")]),e._v(" "),s("ol",{attrs:{start:"3"}},[s("li",[e._v("Completion Suggester")])]),e._v(" "),s("p",[e._v("ä¸»è¦åº”ç”¨åœºæ™¯æ˜¯è‡ªåŠ¨è‡ªåŠ¨è¡¥å…¨ï¼Œæ¯è¾“å…¥ä¸€ä¸ªå­—ç¬¦ï¼Œå³æ—¶å‘é€ä¸€æ¬¡è¯·æ±‚åˆ°æœåŠ¡ç«¯æŸ¥è¯¢å¯èƒ½çš„åŒ¹é…é¡¹ï¼Œå°†æ•°æ®å˜æˆFSTï¼Œåªèƒ½ç”¨äº"),s("strong",[e._v("å‰ç¼€åŒ¹é…")]),e._v("ï¼Œè¿™ä¹Ÿæ˜¯Completion Suggesterçš„å±€é™æ‰€åœ¨ã€‚ä¸ºäº†ä½¿ç”¨Completion Suggester,å­—æ®µçš„ç±»å‹éœ€è¦ä¸“é—¨å®šä¹‰ã€‚")]),e._v(" "),s("p",[e._v("æœ‰ä¸¤ä¸ªå‚æ•°ï¼š")]),e._v(" "),s("p",[e._v("preserve_separatorsï¼š")]),e._v(" "),s("p",[e._v("preserve_position_incrementsï¼š")]),e._v(" "),s("p",[e._v("request_cache=true æŸ¥è¯¢ä»5mså˜æˆ1ms")]),e._v(" "),s("h2",{attrs:{id:"_6-è‡ªå®šä¹‰æœç´¢å»ºè®®å™¨"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-è‡ªå®šä¹‰æœç´¢å»ºè®®å™¨"}},[e._v("#")]),e._v(" 6.  è‡ªå®šä¹‰æœç´¢å»ºè®®å™¨")]),e._v(" "),s("p",[e._v("åŸºäºES suggester completionï¼Œå†…éƒ¨ç”¨FSTï¼ˆFinite State Transducerï¼‰,åªèƒ½ç”¨äºå‰ç¼€åŒ¹é…ï¼Œè¿™ä¹Ÿæ˜¯Completion Suggesterçš„å±€é™æ‰€åœ¨ã€‚æˆ‘ä»¬ç°åœ¨çš„æœç´¢è”æƒ³è¯å¯ä»¥ä¸­ç¼€åŒ¹é…ï¼Œæ˜¯å› ä¸ºä½¿ç”¨äº†ngramï¼ˆmin_gram: 1, max_gram: 10ï¼‰ï¼Œåœ¨å…¥åº“çš„æ—¶å€™æŠŠæ‰€æœ‰çš„è¯è¿›è¡Œæ‹†åˆ†ã€‚")]),e._v(" "),s("blockquote",[s("p",[e._v("æ¯”å¦‚ï¼šé•¿å¯Œç‰›å¥¶ï¼Œä¼šæ‹†æˆâ€œé•¿ã€å¯Œã€ç‰›ã€å¥¶ã€é•¿å¯Œã€å¯Œç‰›ã€ç‰›å¥¶ã€é•¿å¯Œç‰›ã€å¯Œç‰›å¥¶ã€é•¿å¯Œç‰›å¥¶â€")])]),e._v(" "),s("p",[e._v("å¦å¤–ï¼Œä½¿ç”¨äº†ES çš„æ‹¼éŸ³åˆ†è¯å™¨ï¼Œæ”¯æŒç”¨æˆ·è¾“å…¥æ‹¼éŸ³æœç´¢ç›¸å…³çš„è”æƒ³è¯ï¼Œä»¥åŠå°†è¾“å…¥çš„ä¸­æ–‡è¯ä¹Ÿåˆ©ç”¨å¯¹åº”çš„æ‹¼éŸ³è¿›è¡ŒåŒ¹é…ã€‚")]),e._v(" "),s("p",[e._v("åŸºäºESï¼Œä¸ä½¿ç”¨ESè‡ªå¸¦çš„æœç´¢å»ºè®®å™¨Suggesterï¼Œæˆ‘ä»¬æ‰“ç®—è‡ªå·±æ„å»ºä¸€ä¸ªç”¨äºæœç´¢è”æƒ³è¯çš„ç´¢å¼•ï¼Œä¸æ—§æœ‰çš„æœç´¢è”æƒ³è¯å¯¹æ¯”å¦‚ä¸‹ï¼š")]),e._v(" "),s("h3",{attrs:{id:"ä¼˜ç‚¹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¼˜ç‚¹"}},[e._v("#")]),e._v(" ä¼˜ç‚¹")]),e._v(" "),s("ol",[s("li",[e._v("ç´¢å¼•æ›´è½»é‡çº§ã€‚å› ä¸ºç»“æ„ç®€å•ï¼ŒåŒæ ·çš„"),s("strong",[e._v("2ä¸‡")]),e._v("æ¡æ•°æ®ï¼Œæ—§çš„æœç´¢è”æƒ³è¯ç´¢å¼•å ç”¨"),s("code",[e._v("70M")]),e._v("ï¼Œè€Œ æ–°çš„æœç´¢è”æƒ³è¯å ç”¨ç©ºé—´ä¸º"),s("code",[e._v("15M")])]),e._v(" "),s("li",[e._v("æ’æŸ¥é—®é¢˜æ›´æ–¹ä¾¿ï¼Œå¯¹äºå…¥åº“çš„è¯å¦‚ä½•è¿›è¡Œæ‹†åˆ†ï¼Œæ˜¯é€šè¿‡æˆ‘ä»¬è‡ªèº«çš„åº”ç”¨ç¨‹åºä»£ç è¿›è¡Œæ§åˆ¶ï¼Œè€Œä¸”æ‹†åˆ†ç»“æœç›´æ¥å¯ä»¥åœ¨esä¸­è¿›è¡Œæ•°æ®æŸ¥çœ‹")]),e._v(" "),s("li",[e._v("å¯æ“ä½œç©ºé—´æ›´å¤§ï¼Œå¯ä»¥è‡ªä¸»ç¡®å®šï¼Œæ€æ ·çš„è¯å¯ä»¥æŸ¥æ‰¾å…¶ä»–ç›¸å…³çš„è¯")])]),e._v(" "),s("h3",{attrs:{id:"ç¼ºç‚¹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç¼ºç‚¹"}},[e._v("#")]),e._v(" ç¼ºç‚¹")]),e._v(" "),s("ol",[s("li",[e._v("æœ‰ä¸€å®šä»£ç ç»´æŠ¤æˆæœ¬")]),e._v(" "),s("li",[e._v("åˆ†è¯ç­‰åŸç†ä¸ESæœç´¢å¼•æ“çš„åˆ†è¯ç­‰åŸç†è§£è€¦ï¼Œå¯èƒ½ä¸åˆ©äºç»´æŠ¤")]),e._v(" "),s("li",[e._v("ä¸æœç´¢è”æƒ³è¯å¯¹æ¯”ï¼Œæ•°æ®ä¸æ˜¯æ”¾åœ¨ç¼“å­˜ä¸­(é€šè¿‡request ä¸­cacheè¿›è¡Œè§£å†³)")])]),e._v(" "),s("p",[e._v("æˆ‘ä»¬çš„æ–¹æ¡ˆï¼Œmappingæ„å»ºå¦‚ä¸‹ï¼š")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('PUT search_suggester?include_type_name=false\n{\n  "aliases": {\n    "alias_search_suggester": {\n    }\n  },\n  "settings": {\n    "number_of_shards": 3,\n    "number_of_routing_shards": 9,\n    "number_of_replicas": 0,\n    "refresh_interval": "1s",\n    "index":{\n        "sort.field":["frequency", "sku_num"],\n        "sort.order":["desc", "desc"]\n    },\n    "index.search.slowlog.threshold.query.trace": "20ms",\n    "index.search.slowlog.threshold.query.debug": "100ms",\n    "index.search.slowlog.threshold.query.info": "250ms",\n    "index.search.slowlog.threshold.query.warn": "500ms",\n    "index.search.slowlog.threshold.fetch.trace": "20ms",\n    "index.search.slowlog.threshold.fetch.debug": "100ms",\n    "index.search.slowlog.threshold.fetch.info": "250ms",\n    "index.search.slowlog.threshold.fetch.warn": "500ms",\n    "index.indexing.slowlog.threshold.index.trace": "20ms",\n    "index.indexing.slowlog.threshold.index.debug": "100ms",\n    "index.indexing.slowlog.threshold.index.info": "250ms",\n    "index.indexing.slowlog.threshold.index.warn": "500ms"\n  },\n  "mappings": {\n    "_routing": {\n      "required": true\n    },\n    "dynamic":"strict",\n    "properties": {\n      "query": {\n        "type": "keyword",\n         "doc_values": false,\n         "norms": false \n      },\n      "city_zip": {\n        "type": "keyword",\n        "doc_values": false,\n        "norms": false\n      },\n      "term_prefixs": {\n        "type": "keyword",\n        "doc_values": false,\n        "norms": false,\n        "copy_to": "search_suggester_all"\n      },\n      "term_pinyin": {\n        "type": "keyword",\n        "doc_values": false,\n        "norms": false,\n        "copy_to": "search_suggester_all"\n      },\n      "term_shouzimu": {\n        "type": "keyword",\n        "doc_values": false,\n        "norms": false,\n        "copy_to": "search_suggester_all"\n      },\n      "pinyin_prefixs": {\n        "type": "keyword",\n        "doc_values": false,\n        "norms": false,\n        "copy_to": "search_suggester_all"\n      },\n      "shouzimu_prefixs": {\n        "type": "keyword",\n        "doc_values": false,\n         "norms": false,\n         "copy_to": "search_suggester_all"\n      },\n      "frequency": {\n        "type": "long"\n      },\n      "sku_num": {\n        "type": "long"\n      },\n      "search_suggester_all": {\n        "type": "keyword",\n        "doc_values": false,\n        "norms": false\n      }\n    }\n  }\n}\n')])])]),s("p",[e._v("è¯´æ˜ï¼š")]),e._v(" "),s("ol",[s("li",[e._v("term_prefixs : ä¸­æ–‡è¯å‰ç¼€")]),e._v(" "),s("li",[e._v("term_pinyinï¼šä¸­æ–‡è¯æ‹¼éŸ³")]),e._v(" "),s("li",[e._v("term_shouzimuï¼šä¸­æ–‡è¯é¦–å­—æ¯å‰ç¼€")]),e._v(" "),s("li",[e._v("pinyin_prefixsï¼šæ‹¼éŸ³å‰ç¼€")]),e._v(" "),s("li",[e._v("shouzimu_prefixsï¼šé¦–å­—æ¯å‰ç¼€")]),e._v(" "),s("li",[e._v("...")])]),e._v(" "),s("p",[e._v("å°†ç›¸åº”çš„è¯ï¼Œikæ‹†è¯ï¼Œæ‹¼éŸ³æ‹†è¯ï¼Œç»„åˆä¸­æ–‡å’Œæ‹¼éŸ³ç­‰ï¼ŒæŒ‰ç…§ä¸Šè¿°éœ€è¦çš„è§„åˆ™ï¼Œè¿›è¡Œæ‹†åˆ†ï¼Œç„¶åæ’å…¥åˆ°ç´¢å¼•ä¸­ã€‚")]),e._v(" "),s("p",[e._v("æŸ¥è¯¢çš„æ—¶å€™ï¼Œå¯¹äºESçš„æŸ¥è¯¢å¯ä»¥åªæŸ¥è¯¢search_suggester_allè¿™ä¸ªå­—æ®µå•¦ã€‚")]),e._v(" "),s("p",[s("code",[e._v("æŸ¥è¯¢DSLè¯­å¥å¦‚ä¸‹ï¼š")])]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('GET alias_search_suggester/_search\n{\n    "from": 0,\n    "size": 10,\n    "query": {\n        "bool": {\n            "filter": [\n                {\n                    "term": {\n                        "city_zip": {\n                            "value": "400100",\n                            "boost": 1\n                        }\n                    }\n                },\n                {\n                    "term": {\n                        "search_suggester_all": {\n                            "value": "èŠ±å›­",\n                            "boost": 1\n                        }\n                    }\n                }\n            ],\n            "adjust_pure_negative": true,\n            "boost": 1\n        }\n    },\n    "_source": {\n        "includes": [\n            "query",\n            "sku_num"\n        ],\n        "excludes": []\n    },\n    "sort": [\n        {\n            "frequency": {\n                "order": "desc"\n            }\n        },\n        {\n            "sku_num": {\n                "order": "desc"\n            }\n        }\n    ],\n    "track_total_hits": false\n}\n')])])]),s("p",[e._v("ä½¿ç”¨åˆ°çš„å·¥å…·åŒ…æœ‰ï¼š")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("\x3c!-- ikåˆ†è¯ --\x3e\n<dependency>\n    <groupId>org.apache.lucene</groupId>\n    <artifactId>lucene-core</artifactId>\n    <version>8.0.0</version>\n</dependency>\n<dependency>\n    <groupId>org.apache.lucene</groupId>\n    <artifactId>lucene-queryparser</artifactId>\n    <version>8.0.0</version>\n</dependency>\n<dependency>\n    <groupId>org.apache.lucene</groupId>\n    <artifactId>lucene-analyzers-common</artifactId>\n    <version>8.0.0</version>\n</dependency>\n\n\x3c!-- ç¹ä½“è½¬ç®€ä½“ --\x3e\n<dependency>\n\t\t<groupId>com.github.houbb</groupId>\n\t\t<artifactId>opencc4j</artifactId>\n\t<version>1.0.2</version>\n</dependency>\n\n\x3c!-- æ±‰å­—è½¬æ‹¼éŸ³ --\x3e\n<dependency>\n\t\t<groupId>com.belerweb</groupId>\n\t\t<artifactId>pinyin4j</artifactId>\n\t\t<version>2.5.0</version>\n</dependency>\n")])])]),s("h2",{attrs:{id:"å‚è€ƒæ–‡çŒ®"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å‚è€ƒæ–‡çŒ®"}},[e._v("#")]),e._v(" å‚è€ƒæ–‡çŒ®")]),e._v(" "),s("ol",[s("li",[e._v("https://blog.csdn.net/wwd0501/article/details/80595201")]),e._v(" "),s("li",[e._v("https://www.jianshu.com/p/9e2c6a8e1b54  (è¯¥ç¯‡æ–‡æ¡£è¾ƒè¯¦ç»†çš„ä»‹ç»æœç´¢ä¸­æ–‡æœç´¢å»ºè®®è¯çš„å®ç°æ–¹å¼)")])])])}),[],!1,null,null,null);n.default=t.exports}}]);