(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{539:function(_,v,t){"use strict";t.r(v);var e=t(19),a=Object(e.a)({},(function(){var _=this,v=_.$createElement,t=_._self._c||v;return t("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[t("p",[_._v("上线 CheckList 是「检查清单」，而不是 To Do List。CheckList 必须尽可能保证能成功顺利运行，因此需要：")]),_._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[_._v("原则")]),_._v(" "),t("ul",[t("li",[_._v("上线 CheckList 必须"),t("strong",[_._v("至少")]),_._v("在线下环境按照清单"),t("strong",[_._v("执行一遍")]),_._v("，需要确保 CheckList 在线上 99.9% 能够执行成功。")]),_._v(" "),t("li",[_._v("与大多数文档类似，CheckList 也遵循总分总原则，文档尽量清晰易懂，对于内容特别多的部分可以通过附件来添加。")]),_._v(" "),t("li",[_._v("每一项操作，必须责任到具体的操作人，当操作人执行完成后，CheckList 负责人必须进行 Check 是否成功执行，只有成功执行了，方可进行下一步。")]),_._v(" "),t("li",[_._v("CheckList 需要开发人员至少在开发的中后期阶段，进行预想上线后的操作步骤，并进行注意事项记录。")]),_._v(" "),t("li",[_._v("由于当开始应用发布后，可能会因为一些前置操作没做导致服务不可用，因此，需要提前准备好，哪些操作可以进行前置操作。")]),_._v(" "),t("li",[_._v("应用发布完成后，必须对所开发的功能进行验证（不存在说线上不可验证的功能，可以用一些冗余代码来进行尽可能的验证）。")]),_._v(" "),t("li",[_._v("CheckList 的所有项要遵循从上到下的时间线依次操作，即依次按照编写的文档操作，不可跳过步骤。")]),_._v(" "),t("li",[_._v("CheckList 需要给出系统可能的风险点，倒逼开发者进行稳定性思考。")]),_._v(" "),t("li",[_._v("每次的发布一定要认真想好是否可以回滚，如果不能回滚，出问题了，该如何操作。")])])]),_._v(" "),t("p",[_._v("这里给出一个服务端上线 CheckList 的样例模板，大家可以根据需要适当增加、修改以及删除。")]),_._v(" "),t("h1",{attrs:{id:"demo-v1-0-上线-checklist"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#demo-v1-0-上线-checklist"}},[_._v("#")]),_._v(" Demo V1.0 上线 CheckList")]),_._v(" "),t("table",[t("thead",[t("tr",[t("th",[_._v("项目&版本")]),_._v(" "),t("th",[_._v("团队成员")]),_._v(" "),t("th",[_._v("CheckList 主导人")]),_._v(" "),t("th",[_._v("发布时间")]),_._v(" "),t("th",[_._v("预计发布时长")]),_._v(" "),t("th",[_._v("影响范围")]),_._v(" "),t("th",[_._v("创建时间")])])]),_._v(" "),t("tbody",[t("tr",[t("td",[_._v("Demo v1.0")]),_._v(" "),t("td",[t("code",[_._v("李四")]),_._v("、"),t("code",[_._v("小明")])]),_._v(" "),t("td",[t("code",[_._v("李四")])]),_._v(" "),t("td",[_._v("2023-01-29 10:00")]),_._v(" "),t("td",[_._v("10min")]),_._v(" "),t("td",[_._v("发布期间会有部分用户超时不可用")]),_._v(" "),t("td",[_._v("2023-01-29")])])])]),_._v(" "),t("h2",{attrs:{id:"_1-上线功能点及涉及服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-上线功能点及涉及服务"}},[_._v("#")]),_._v(" 1. 上线功能点及涉及服务")]),_._v(" "),t("h3",{attrs:{id:"_1-1-新功能点及改动点"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-新功能点及改动点"}},[_._v("#")]),_._v(" 1.1 新功能点及改动点")]),_._v(" "),t("p",[_._v("本次版本发布有新功能以及旧版功能的优化，具体有： "),t("code",[_._v("小明")])]),_._v(" "),t("ul",[t("li",[_._v("增加用户画像模块；")]),_._v(" "),t("li",[_._v("修改用户权限配置的bug;")]),_._v(" "),t("li",[_._v("删除评价中冗余代码；")])]),_._v(" "),t("h3",{attrs:{id:"_1-2-涉及服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-涉及服务"}},[_._v("#")]),_._v(" 1.2 涉及服务")]),_._v(" "),t("p",[_._v("本次版本发布涉及较多服务，具体有： "),t("code",[_._v("李四")])]),_._v(" "),t("ol",[t("li",[_._v("Demo A端服务 "),t("code",[_._v("admin-demo")])]),_._v(" "),t("li",[_._v("Demo 前端服务 "),t("code",[_._v("demo-ui")])]),_._v(" "),t("li",[_._v("Demo 对外服务 "),t("code",[_._v("demo-service")])]),_._v(" "),t("li",[_._v("Demo 监控服务 "),t("code",[_._v("demo-apm")])])]),_._v(" "),t("blockquote",[t("p",[_._v("注意：服务的发布顺序依次从上到下，不可跳步。")])]),_._v(" "),t("h3",{attrs:{id:"_1-3-注意事项"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-注意事项"}},[_._v("#")]),_._v(" 1.3 注意事项")]),_._v(" "),t("h2",{attrs:{id:"_2-上线前预操作-发布前半天"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-上线前预操作-发布前半天"}},[_._v("#")]),_._v(" 2. 上线前预操作 "),t("code",[_._v("发布前半天")])]),_._v(" "),t("h3",{attrs:{id:"_2-1-配置相关"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-配置相关"}},[_._v("#")]),_._v(" 2.1 配置相关")]),_._v(" "),t("p",[t("strong",[_._v("1) Apollo 配置")]),_._v(" "),t("code",[_._v("@张三")])]),_._v(" "),t("p",[_._v("增加如下配置：")]),_._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[_._v("demo.search.switch=false\ndemo.search.test=good\n")])])]),t("p",[_._v("删除如下配置：")]),_._v(" "),t("p",[t("s",[_._v("demo.search.t=55")])]),_._v(" "),t("blockquote",[t("p",[_._v("check：在测试环境配置完成后，通过 actuator /properties 验证，正式环境配置后，人工校验，当项目发布成功后，需再次通过 actuator /properties 校验。 "),t("code",[_._v("@李四")])])]),_._v(" "),t("p",[t("strong",[_._v("2）application.properties")]),_._v(" 配置 "),t("code",[_._v("@张三")])]),_._v(" "),t("p",[_._v("增加如下配置：")]),_._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[_._v("demo.spring.actuator=health\n")])])]),t("blockquote",[t("p",[_._v("check：在测试环境配置完成后，通过 actuator /properties 验证，正式环境配置后，人工校验，当项目发布成功后，需再次通过 actuator /properties 校验。 "),t("code",[_._v("@李四")])])]),_._v(" "),t("h3",{attrs:{id:"_2-2-资源申请相关"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-资源申请相关"}},[_._v("#")]),_._v(" 2.2 资源申请相关")]),_._v(" "),t("p",[t("strong",[_._v("1）域名申请")]),_._v(" "),t("code",[_._v("@王五")])]),_._v(" "),t("p",[_._v("运维域名管理平台，申请域名："),t("code",[_._v("http://api.demo.com")])]),_._v(" "),t("blockquote",[t("p",[_._v("check: ping 该域名 http://api.demo.com，域名解析可能需要一到两天，因此，需要提前一到两天申请。 "),t("code",[_._v("@李四")])])]),_._v(" "),t("p",[t("strong",[_._v("2) 线上机器申请")]),_._v(" "),t("code",[_._v("@王五")])]),_._v(" "),t("p",[_._v("运维机器管理平台，申请 3 台 4 C 16 G 的机器。")]),_._v(" "),t("blockquote",[t("p",[_._v("check：运维管理平台上查看机器是否存在。 "),t("code",[_._v("@李四")])])]),_._v(" "),t("h3",{attrs:{id:"_2-3-数据库操作相关"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-数据库操作相关"}},[_._v("#")]),_._v(" 2.3 数据库操作相关")]),_._v(" "),t("p",[t("strong",[_._v("1）MySQL 操作")]),_._v(" "),t("code",[_._v("@小七")])]),_._v(" "),t("p",[_._v("详细见："),t("u",[_._v("附件一")]),_._v("。")]),_._v(" "),t("blockquote",[t("p",[_._v("check：通过 DBA 平台，查看 MySQL 表 t_test 是否成功建立，表 t_middle 的字段 name 从 char（10） 是否改为 varchar（20）。"),t("code",[_._v("@李四")])])]),_._v(" "),t("p",[t("strong",[_._v("2）ElasticSearch 操作")]),_._v(" "),t("code",[_._v("@小花")])]),_._v(" "),t("p",[_._v("详细见："),t("u",[_._v("附件二")])]),_._v(" "),t("blockquote",[t("p",[_._v("check：在 Kibana 平台，执行 GET demo/_mapping 查看索引的字段是否成功创建。"),t("code",[_._v("@李四")])])]),_._v(" "),t("p",[t("strong",[_._v("3）Redis 操作")]),_._v(" "),t("code",[_._v("@小花")])]),_._v(" "),t("p",[_._v("无")]),_._v(" "),t("h2",{attrs:{id:"_3-正式发布流程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-正式发布流程"}},[_._v("#")]),_._v(" 3. 正式发布流程")]),_._v(" "),t("h3",{attrs:{id:"_3-1-应用程序发布"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-应用程序发布"}},[_._v("#")]),_._v(" 3.1 应用程序发布")]),_._v(" "),t("ul",[t("li",[t("strong",[_._v("步骤一：发布 "),t("code",[_._v("admin-demo")])]),_._v(" "),t("code",[_._v("@李四")])])]),_._v(" "),t("blockquote",[t("p",[t("strong",[_._v("check")]),_._v("：查看 admin-demo 的日志是否报错，执行接口/demo/user/1222 接口，是否成功返回 success，否则检查 MySQL 的数据是操作有问题。 "),t("code",[_._v("@李四")])])]),_._v(" "),t("ul",[t("li",[t("strong",[_._v("步骤二：发布 "),t("code",[_._v("demo-ui")])]),_._v(" "),t("code",[_._v("@李四")])])]),_._v(" "),t("blockquote",[t("p",[t("strong",[_._v("check")]),_._v("：利用管理员账号 admin/admin 查看是否新增用户权限页面、用户画像模块，并添加一个用例，成功添加后，执行MySQL 语句，Delete table test where a = 122. "),t("code",[_._v("@李四")])])]),_._v(" "),t("ul",[t("li",[t("strong",[_._v("步骤三：发布 "),t("code",[_._v("demo-service")])]),_._v(" "),t("code",[_._v("@李四")])])]),_._v(" "),t("blockquote",[t("p",[t("strong",[_._v("check")]),_._v(": 查看项目日志是否有 warn 以及日志，调用接口 Dubbo demo.test.service.api.search，是否返回 success，否则查看代码是否有问题。")])]),_._v(" "),t("ul",[t("li",[t("strong",[_._v("步骤四：发布 "),t("code",[_._v("demo-apm")])]),_._v(" "),t("code",[_._v("@李四")])])]),_._v(" "),t("blockquote",[t("p",[t("strong",[_._v("check")]),_._v("：查看项目日志，登录 APM 后台，查看是否有指标上报。")])]),_._v(" "),t("h3",{attrs:{id:"_3-2-网关层配置发布"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-网关层配置发布"}},[_._v("#")]),_._v(" 3.2 网关层配置发布")]),_._v(" "),t("p",[_._v("无")]),_._v(" "),t("h2",{attrs:{id:"_4-应用发布后"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-应用发布后"}},[_._v("#")]),_._v(" 4. 应用发布后")]),_._v(" "),t("p",[_._v("在应用发布的过程中，我们已经依次保证单个服务以及自上而下的服务的基本流程的正确，但是仍然不能保证所有服务的功能正常，因此需要做进一步的功能验证。")]),_._v(" "),t("h3",{attrs:{id:"_4-1-功能验证-重要"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-功能验证-重要"}},[_._v("#")]),_._v(" 4.1 功能验证（重要）")]),_._v(" "),t("p",[_._v("功能验证是应用发布后至关重要的一步，严禁发布后的功能没有验证。")]),_._v(" "),t("p",[_._v("验证过程需要让项目组的人员一起参与，包括：测试、前端、后端、产品，当功能验证都通过后，方可交付给一线业务。")]),_._v(" "),t("p",[t("strong",[_._v("1）本次功能验证")])]),_._v(" "),t("ol",[t("li",[_._v("新增用户权限页面；")]),_._v(" "),t("li",[_._v("编辑用户权限页面；")]),_._v(" "),t("li",[_._v("删除用户权限页面")])]),_._v(" "),t("p",[t("strong",[_._v("2）重要功能回归")])]),_._v(" "),t("ol",[t("li",[_._v("用户统计模块的功能点是否正常。")])]),_._v(" "),t("h3",{attrs:{id:"_4-2-日志监控告警"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-日志监控告警"}},[_._v("#")]),_._v(" 4.2 日志监控告警")]),_._v(" "),t("p",[t("strong",[_._v("1）治理日志")])]),_._v(" "),t("p",[t("strong",[_._v("2）治理监控指标")])]),_._v(" "),t("p",[t("strong",[_._v("3）添加告警")])]),_._v(" "),t("h2",{attrs:{id:"_5-风险点"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-风险点"}},[_._v("#")]),_._v(" 5. 风险点")]),_._v(" "),t("p",[_._v("无")]),_._v(" "),t("h2",{attrs:{id:"_6-回滚操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-回滚操作"}},[_._v("#")]),_._v(" 6. 回滚操作")]),_._v(" "),t("p",[_._v("无需回滚，本次为首次功能上线。")]),_._v(" "),t("h2",{attrs:{id:"_7-其他相关注意事项"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-其他相关注意事项"}},[_._v("#")]),_._v(" 7. 其他相关注意事项")]),_._v(" "),t("p",[_._v("无")]),_._v(" "),t("h2",{attrs:{id:"_8-附件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-附件"}},[_._v("#")]),_._v(" 8. 附件")]),_._v(" "),t("ul",[t("li",[_._v("附件1：v1.0.0 MySQL")]),_._v(" "),t("li",[_._v("附件2：v1.0.0 Elasticsearch")])])])}),[],!1,null,null,null);v.default=a.exports}}]);