<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>å…³äºæœç´¢å»ºè®®è¯çš„åˆ†æä»¥åŠç›¸åº”çš„ä¼˜åŒ–æ–¹æ¡ˆ | Wow4j</title>
    <meta name="generator" content="VuePress 1.9.2">
    <link rel="icon" href="/wow4j/img/favicon.ico">
    <script src="https://cdn.wwads.cn/js/makemoney.js" type="text/javascript"></script>
    <meta name="description" content="ä¸€ä¸ªç¥å¥‡çš„ä¸ªäººç½‘ç«™">
    <meta name="keywords" content="vuepress,theme,blog,vdoing">
    <meta name="theme-color" content="#11a8cd">
    <meta name="wwads-cn-verify" content="6c4b761a28b734fe93831e3fb400ce87">
    
    <link rel="preload" href="/wow4j/assets/css/0.styles.2be8a3b8.css" as="style"><link rel="preload" href="/wow4j/assets/js/app.9c6a4848.js" as="script"><link rel="preload" href="/wow4j/assets/js/2.290edd30.js" as="script"><link rel="preload" href="/wow4j/assets/js/43.32f5429c.js" as="script"><link rel="prefetch" href="/wow4j/assets/js/10.cc49bee5.js"><link rel="prefetch" href="/wow4j/assets/js/100.d0d750a5.js"><link rel="prefetch" href="/wow4j/assets/js/101.c886cab2.js"><link rel="prefetch" href="/wow4j/assets/js/102.19f8414a.js"><link rel="prefetch" href="/wow4j/assets/js/103.77106e4e.js"><link rel="prefetch" href="/wow4j/assets/js/104.1c378d9d.js"><link rel="prefetch" href="/wow4j/assets/js/105.ea2775b6.js"><link rel="prefetch" href="/wow4j/assets/js/106.8cd360a9.js"><link rel="prefetch" href="/wow4j/assets/js/107.723f3b88.js"><link rel="prefetch" href="/wow4j/assets/js/108.402b1319.js"><link rel="prefetch" href="/wow4j/assets/js/109.b484419b.js"><link rel="prefetch" href="/wow4j/assets/js/11.62833ef0.js"><link rel="prefetch" href="/wow4j/assets/js/110.40c42c91.js"><link rel="prefetch" href="/wow4j/assets/js/111.9d56f07a.js"><link rel="prefetch" href="/wow4j/assets/js/112.0481f6bd.js"><link rel="prefetch" href="/wow4j/assets/js/113.8566a1ff.js"><link rel="prefetch" href="/wow4j/assets/js/114.7b735cde.js"><link rel="prefetch" href="/wow4j/assets/js/115.664878dd.js"><link rel="prefetch" href="/wow4j/assets/js/116.b377ad9f.js"><link rel="prefetch" href="/wow4j/assets/js/117.a88ec584.js"><link rel="prefetch" href="/wow4j/assets/js/118.fe3f20bc.js"><link rel="prefetch" href="/wow4j/assets/js/119.3e9fe0d2.js"><link rel="prefetch" href="/wow4j/assets/js/12.5f6f9546.js"><link rel="prefetch" href="/wow4j/assets/js/120.56830621.js"><link rel="prefetch" href="/wow4j/assets/js/121.29e5af93.js"><link rel="prefetch" href="/wow4j/assets/js/122.0ce81628.js"><link rel="prefetch" href="/wow4j/assets/js/123.be47c083.js"><link rel="prefetch" href="/wow4j/assets/js/124.838c4ccc.js"><link rel="prefetch" href="/wow4j/assets/js/125.864730ae.js"><link rel="prefetch" href="/wow4j/assets/js/126.77dfdbc4.js"><link rel="prefetch" href="/wow4j/assets/js/127.c6139497.js"><link rel="prefetch" href="/wow4j/assets/js/128.0f244320.js"><link rel="prefetch" href="/wow4j/assets/js/129.bd5a745a.js"><link rel="prefetch" href="/wow4j/assets/js/13.52cbcaa6.js"><link rel="prefetch" href="/wow4j/assets/js/130.fd400d64.js"><link rel="prefetch" href="/wow4j/assets/js/131.017cf0e1.js"><link rel="prefetch" href="/wow4j/assets/js/132.0700c2f1.js"><link rel="prefetch" href="/wow4j/assets/js/133.f5f2c958.js"><link rel="prefetch" href="/wow4j/assets/js/134.3d973545.js"><link rel="prefetch" href="/wow4j/assets/js/135.d1446f2c.js"><link rel="prefetch" href="/wow4j/assets/js/136.bd089225.js"><link rel="prefetch" href="/wow4j/assets/js/137.8d60eb0b.js"><link rel="prefetch" href="/wow4j/assets/js/138.8ca213e2.js"><link rel="prefetch" href="/wow4j/assets/js/139.c2229689.js"><link rel="prefetch" href="/wow4j/assets/js/14.9598724a.js"><link rel="prefetch" href="/wow4j/assets/js/140.e3136a19.js"><link rel="prefetch" href="/wow4j/assets/js/141.f23ba9ac.js"><link rel="prefetch" href="/wow4j/assets/js/142.d11ce65a.js"><link rel="prefetch" href="/wow4j/assets/js/143.57a58889.js"><link rel="prefetch" href="/wow4j/assets/js/144.098dfd5b.js"><link rel="prefetch" href="/wow4j/assets/js/145.27e182e2.js"><link rel="prefetch" href="/wow4j/assets/js/146.7690d2b5.js"><link rel="prefetch" href="/wow4j/assets/js/147.bcc94f51.js"><link rel="prefetch" href="/wow4j/assets/js/148.ee9a759b.js"><link rel="prefetch" href="/wow4j/assets/js/149.46774ec2.js"><link rel="prefetch" href="/wow4j/assets/js/15.707c3321.js"><link rel="prefetch" href="/wow4j/assets/js/150.7cc49407.js"><link rel="prefetch" href="/wow4j/assets/js/151.75f299ba.js"><link rel="prefetch" href="/wow4j/assets/js/152.8f4725a5.js"><link rel="prefetch" href="/wow4j/assets/js/153.bc2293ac.js"><link rel="prefetch" href="/wow4j/assets/js/154.a139674e.js"><link rel="prefetch" href="/wow4j/assets/js/16.d1310490.js"><link rel="prefetch" href="/wow4j/assets/js/17.c7e6087b.js"><link rel="prefetch" href="/wow4j/assets/js/18.d6e79f99.js"><link rel="prefetch" href="/wow4j/assets/js/19.f17afc4a.js"><link rel="prefetch" href="/wow4j/assets/js/20.a637b76c.js"><link rel="prefetch" href="/wow4j/assets/js/21.6851dbb3.js"><link rel="prefetch" href="/wow4j/assets/js/22.72f87f18.js"><link rel="prefetch" href="/wow4j/assets/js/23.7cd46cec.js"><link rel="prefetch" href="/wow4j/assets/js/24.665a7da0.js"><link rel="prefetch" href="/wow4j/assets/js/25.1cce4c66.js"><link rel="prefetch" href="/wow4j/assets/js/26.7e23f5c7.js"><link rel="prefetch" href="/wow4j/assets/js/27.3746869d.js"><link rel="prefetch" href="/wow4j/assets/js/28.baeff496.js"><link rel="prefetch" href="/wow4j/assets/js/29.f4052d4b.js"><link rel="prefetch" href="/wow4j/assets/js/3.38193b7d.js"><link rel="prefetch" href="/wow4j/assets/js/30.d84f8605.js"><link rel="prefetch" href="/wow4j/assets/js/31.792bf7ba.js"><link rel="prefetch" href="/wow4j/assets/js/32.e327ed3c.js"><link rel="prefetch" href="/wow4j/assets/js/33.4d34e13b.js"><link rel="prefetch" href="/wow4j/assets/js/34.f3c67117.js"><link rel="prefetch" href="/wow4j/assets/js/35.ebf77968.js"><link rel="prefetch" href="/wow4j/assets/js/36.76d36ea3.js"><link rel="prefetch" href="/wow4j/assets/js/37.a9305c46.js"><link rel="prefetch" href="/wow4j/assets/js/38.954c0bf8.js"><link rel="prefetch" href="/wow4j/assets/js/39.0529bd6b.js"><link rel="prefetch" href="/wow4j/assets/js/4.966a8281.js"><link rel="prefetch" href="/wow4j/assets/js/40.1ce6d418.js"><link rel="prefetch" href="/wow4j/assets/js/41.0dd0fdab.js"><link rel="prefetch" href="/wow4j/assets/js/42.4c5d7fd5.js"><link rel="prefetch" href="/wow4j/assets/js/44.af99ecf7.js"><link rel="prefetch" href="/wow4j/assets/js/45.f3f5b339.js"><link rel="prefetch" href="/wow4j/assets/js/46.d1b05cd5.js"><link rel="prefetch" href="/wow4j/assets/js/47.bad9e247.js"><link rel="prefetch" href="/wow4j/assets/js/48.fc6cfc68.js"><link rel="prefetch" href="/wow4j/assets/js/49.557e5fef.js"><link rel="prefetch" href="/wow4j/assets/js/5.0181d5e8.js"><link rel="prefetch" href="/wow4j/assets/js/50.4839f893.js"><link rel="prefetch" href="/wow4j/assets/js/51.5f3821cd.js"><link rel="prefetch" href="/wow4j/assets/js/52.90d46757.js"><link rel="prefetch" href="/wow4j/assets/js/53.fbbacabf.js"><link rel="prefetch" href="/wow4j/assets/js/54.de3636aa.js"><link rel="prefetch" href="/wow4j/assets/js/55.440a63f1.js"><link rel="prefetch" href="/wow4j/assets/js/56.e8e725aa.js"><link rel="prefetch" href="/wow4j/assets/js/57.151643fd.js"><link rel="prefetch" href="/wow4j/assets/js/58.2961ced5.js"><link rel="prefetch" href="/wow4j/assets/js/59.3599dd07.js"><link rel="prefetch" href="/wow4j/assets/js/6.483da95d.js"><link rel="prefetch" href="/wow4j/assets/js/60.9d37925e.js"><link rel="prefetch" href="/wow4j/assets/js/61.bf69f6a4.js"><link rel="prefetch" href="/wow4j/assets/js/62.676ff119.js"><link rel="prefetch" href="/wow4j/assets/js/63.bf8e3019.js"><link rel="prefetch" href="/wow4j/assets/js/64.aa7847d7.js"><link rel="prefetch" href="/wow4j/assets/js/65.aaa6efcd.js"><link rel="prefetch" href="/wow4j/assets/js/66.b0a59fd1.js"><link rel="prefetch" href="/wow4j/assets/js/67.cdb4f3b4.js"><link rel="prefetch" href="/wow4j/assets/js/68.bc5f82db.js"><link rel="prefetch" href="/wow4j/assets/js/69.e4305a92.js"><link rel="prefetch" href="/wow4j/assets/js/7.37ad2f1b.js"><link rel="prefetch" href="/wow4j/assets/js/70.d9573a2e.js"><link rel="prefetch" href="/wow4j/assets/js/71.5b99c14c.js"><link rel="prefetch" href="/wow4j/assets/js/72.b7538ef4.js"><link rel="prefetch" href="/wow4j/assets/js/73.773b5e16.js"><link rel="prefetch" href="/wow4j/assets/js/74.273d0158.js"><link rel="prefetch" href="/wow4j/assets/js/75.6f5e1a51.js"><link rel="prefetch" href="/wow4j/assets/js/76.7f42b6e5.js"><link rel="prefetch" href="/wow4j/assets/js/77.493a9b73.js"><link rel="prefetch" href="/wow4j/assets/js/78.58c79ad9.js"><link rel="prefetch" href="/wow4j/assets/js/79.8651ff93.js"><link rel="prefetch" href="/wow4j/assets/js/8.3e9d78b0.js"><link rel="prefetch" href="/wow4j/assets/js/80.06efe637.js"><link rel="prefetch" href="/wow4j/assets/js/81.13f1b905.js"><link rel="prefetch" href="/wow4j/assets/js/82.89f2eae1.js"><link rel="prefetch" href="/wow4j/assets/js/83.95bf174f.js"><link rel="prefetch" href="/wow4j/assets/js/84.7d6d07f7.js"><link rel="prefetch" href="/wow4j/assets/js/85.86ad3916.js"><link rel="prefetch" href="/wow4j/assets/js/86.7bc05860.js"><link rel="prefetch" href="/wow4j/assets/js/87.11ec1120.js"><link rel="prefetch" href="/wow4j/assets/js/88.17d641d1.js"><link rel="prefetch" href="/wow4j/assets/js/89.a896b238.js"><link rel="prefetch" href="/wow4j/assets/js/9.147b07eb.js"><link rel="prefetch" href="/wow4j/assets/js/90.6a4f9bbe.js"><link rel="prefetch" href="/wow4j/assets/js/91.f5aac00e.js"><link rel="prefetch" href="/wow4j/assets/js/92.04032d2e.js"><link rel="prefetch" href="/wow4j/assets/js/93.7f0b6b5c.js"><link rel="prefetch" href="/wow4j/assets/js/94.c659cc62.js"><link rel="prefetch" href="/wow4j/assets/js/95.97436f9a.js"><link rel="prefetch" href="/wow4j/assets/js/96.856d5f2f.js"><link rel="prefetch" href="/wow4j/assets/js/97.b2d11e35.js"><link rel="prefetch" href="/wow4j/assets/js/98.e57c9fff.js"><link rel="prefetch" href="/wow4j/assets/js/99.acf8a766.js">
    <link rel="stylesheet" href="/wow4j/assets/css/0.styles.2be8a3b8.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="ç›®å½•" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/wow4j/" class="home-link router-link-active"><img src="https://cdn.jsdelivr.net/gh/xugaoyi/image_store/blog/20200409124835.png" alt="Wow4j" class="logo"> <span class="site-name can-hide">Wow4j</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/wow4j/" class="nav-link">é¦–é¡µ</a></div><div class="nav-item"><a href="/wow4j/pages/f380dd/" class="nav-link">ä¸ªäººä½¿ç”¨è¯´æ˜ä¹¦</a></div><div class="nav-item"><a href="/wow4j/pages/19aee3/" class="nav-link">åç«¯å¼€å‘</a></div><div class="nav-item"><a href="/wow4j/pages/d00ad7/" class="nav-link">å‰ç«¯å¼€å‘</a></div><div class="nav-item"><a href="/wow4j/pages/ca725f/" class="nav-link">æµ‹è¯•å¼€å‘</a></div><div class="nav-item"><a href="/wow4j/pages/df4369/" class="nav-link">è¿ç»´å¼€å‘</a></div><div class="nav-item"><a href="/wow4j/pages/aa09ae/" class="nav-link">å¤§æ•°æ®å¼€å‘</a></div><div class="nav-item"><a href="/wow4j/pages/5b4bcd/" class="nav-link">äº§å“&amp;UIäº¤äº’</a></div><div class="nav-item"><a href="/wow4j/pages/7ba30c/" class="nav-link">å›¢é˜Ÿç®¡ç†</a></div><div class="nav-item"><a href="/wow4j/pages/92a016/" class="nav-link">è½¯æŠ€èƒ½</a></div><div class="nav-item"><a href="/wow4j/pages/df3516/" class="nav-link">ä»–å±±ä¹‹çŸ³</a></div><div class="nav-item"><a href="/wow4j/pages/366b2d/" class="nav-link">å¼€æºäº§å“</a></div><div class="nav-item"><a href="/wow4j/pages/fdeb84/" class="nav-link">æ•¬è¯·æœŸå¾…</a></div> <a href="https://github.com//timchen525/wow4j" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/wow4j/" class="nav-link">é¦–é¡µ</a></div><div class="nav-item"><a href="/wow4j/pages/f380dd/" class="nav-link">ä¸ªäººä½¿ç”¨è¯´æ˜ä¹¦</a></div><div class="nav-item"><a href="/wow4j/pages/19aee3/" class="nav-link">åç«¯å¼€å‘</a></div><div class="nav-item"><a href="/wow4j/pages/d00ad7/" class="nav-link">å‰ç«¯å¼€å‘</a></div><div class="nav-item"><a href="/wow4j/pages/ca725f/" class="nav-link">æµ‹è¯•å¼€å‘</a></div><div class="nav-item"><a href="/wow4j/pages/df4369/" class="nav-link">è¿ç»´å¼€å‘</a></div><div class="nav-item"><a href="/wow4j/pages/aa09ae/" class="nav-link">å¤§æ•°æ®å¼€å‘</a></div><div class="nav-item"><a href="/wow4j/pages/5b4bcd/" class="nav-link">äº§å“&amp;UIäº¤äº’</a></div><div class="nav-item"><a href="/wow4j/pages/7ba30c/" class="nav-link">å›¢é˜Ÿç®¡ç†</a></div><div class="nav-item"><a href="/wow4j/pages/92a016/" class="nav-link">è½¯æŠ€èƒ½</a></div><div class="nav-item"><a href="/wow4j/pages/df3516/" class="nav-link">ä»–å±±ä¹‹çŸ³</a></div><div class="nav-item"><a href="/wow4j/pages/366b2d/" class="nav-link">å¼€æºäº§å“</a></div><div class="nav-item"><a href="/wow4j/pages/fdeb84/" class="nav-link">æ•¬è¯·æœŸå¾…</a></div> <a href="https://github.com//timchen525/wow4j" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/wow4j/pages/19aee3/" class="sidebar-link">æ¦‚è¦</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>é¢è¯•å…«è‚¡æ–‡</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>æœåŠ¡ç«¯å°æŠ€å·§åˆé›†</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaåŸºç¡€</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>MySQL ç›¸å…³</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Redis æœ€ä½³å®è·µæŒ‡å—</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>æ–‡æœ¬æœç´¢Elasticsearch</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/wow4j/pages/3343c6/" class="sidebar-link">å‚ç›´ç”µå•†æœç´¢æ³¨æ„ç‚¹</a></li><li><a href="/wow4j/pages/dcbb80/" aria-current="page" class="active sidebar-link">å…³äºæœç´¢å»ºè®®è¯çš„åˆ†æä»¥åŠç›¸åº”çš„ä¼˜åŒ–æ–¹æ¡ˆ</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/wow4j/pages/dcbb80/#_1-èƒŒæ™¯" class="sidebar-link">1. èƒŒæ™¯</a></li><li class="sidebar-sub-header"><a href="/wow4j/pages/dcbb80/#_2-æœç´¢å»ºè®®å™¨çš„æŒ‡å¯¼åŸåˆ™" class="sidebar-link">2. æœç´¢å»ºè®®å™¨çš„æŒ‡å¯¼åŸåˆ™</a></li><li class="sidebar-sub-header"><a href="/wow4j/pages/dcbb80/#_3-æœç´¢å»ºè®®å™¨å®ç°åŠŸèƒ½" class="sidebar-link">3.  æœç´¢å»ºè®®å™¨å®ç°åŠŸèƒ½</a></li><li class="sidebar-sub-header"><a href="/wow4j/pages/dcbb80/#_4-æœç´¢å»ºè®®è¯éœ€è¦è€ƒè™‘çš„å› ç´ " class="sidebar-link">4.  æœç´¢å»ºè®®è¯éœ€è¦è€ƒè™‘çš„å› ç´ </a></li><li class="sidebar-sub-header"><a href="/wow4j/pages/dcbb80/#_5-åŸºäºes-çš„æœç´¢å»ºè®®å™¨çš„ç”¨æ³•" class="sidebar-link">5. åŸºäºES çš„æœç´¢å»ºè®®å™¨çš„ç”¨æ³•</a></li><li class="sidebar-sub-header"><a href="/wow4j/pages/dcbb80/#_6-è‡ªå®šä¹‰æœç´¢å»ºè®®å™¨" class="sidebar-link">6.  è‡ªå®šä¹‰æœç´¢å»ºè®®å™¨</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/wow4j/pages/dcbb80/#ä¼˜ç‚¹" class="sidebar-link">ä¼˜ç‚¹</a></li><li class="sidebar-sub-header"><a href="/wow4j/pages/dcbb80/#ç¼ºç‚¹" class="sidebar-link">ç¼ºç‚¹</a></li></ul></li><li class="sidebar-sub-header"><a href="/wow4j/pages/dcbb80/#å‚è€ƒæ–‡çŒ®" class="sidebar-link">å‚è€ƒæ–‡çŒ®</a></li></ul></li><li><a href="/wow4j/pages/e0e231/" class="sidebar-link">ElasticSearch ä¸´æ—¶</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Kafka æœ€ä½³å®è·µæŒ‡å—</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ç½‘ç»œç›¸å…³</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>æ¶æ„ç›¸å…³</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ç›‘æ§å‘Šè­¦</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>é˜²çˆ¬é£æ§</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ç¨³å®šæ€§ checklist</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>æ•ˆèƒ½å·¥å…·</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-0c557b5e><div class="articleInfo" data-v-0c557b5e><ul class="breadcrumbs" data-v-0c557b5e><li data-v-0c557b5e><a href="/wow4j/" title="é¦–é¡µ" class="iconfont icon-home router-link-active" data-v-0c557b5e></a></li> <li data-v-0c557b5e><span data-v-0c557b5e>åç«¯å¼€å‘</span></li><li data-v-0c557b5e><span data-v-0c557b5e>æ–‡æœ¬æœç´¢Elasticsearch</span></li></ul> <div class="info" data-v-0c557b5e><div title="ä½œè€…" class="author iconfont icon-touxiang" data-v-0c557b5e><a href="https://github.com/timchen525/wow4j" target="_blank" title="ä½œè€…" class="beLink" data-v-0c557b5e>timchen525</a></div> <div title="åˆ›å»ºæ—¶é—´" class="date iconfont icon-riqi" data-v-0c557b5e><a href="javascript:;" data-v-0c557b5e>2023-02-01</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">å…³äºæœç´¢å»ºè®®è¯çš„åˆ†æä»¥åŠç›¸åº”çš„ä¼˜åŒ–æ–¹æ¡ˆ<!----></h1>  <div class="theme-vdoing-content content__default"><h2 id="_1-èƒŒæ™¯"><a href="#_1-èƒŒæ™¯" class="header-anchor">#</a> 1. èƒŒæ™¯</h2> <p>ä¸ç®¡æ˜¯å…¨æ–‡æœç´¢å¼•æ“ï¼Œè¿˜æ˜¯å‚ç›´æœç´¢ç³»ç»Ÿä¸­ï¼Œå½“ç”¨æˆ·åœ¨æœç´¢ğŸ”è¾“å…¥æ¡†ä¸­è¾“å…¥å‡ ä¸ªå­—çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨ä¸‹æ¥ä¸€äº›è¯å»è‡ªåŠ¨è¡¥å…¨ç”¨æˆ·å¯èƒ½è¦æœçš„è¯è¯­ï¼Œè¿™éƒ¨åˆ†çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬ç§°ä½œæœç´¢å»ºè®®å™¨çš„åŠŸèƒ½ï¼ˆè‹±æ–‡å«åš&quot;suggest&quot;ï¼‰ã€‚æœ¬æ–‡å°†ä»‹ç»ä¸‹ç›®å‰ä¸»æµçš„æœç´¢å»ºè®®å™¨çš„åšæ³•ï¼Œå¹¶ä¸”ç»™å‡ºäº†ä¸€ä¸ªæˆ‘ä»¬è®¤ä¸ºæ›´å¥½çš„æœç´¢å»ºè®®å™¨çš„åšæ³•ã€‚</p> <h2 id="_2-æœç´¢å»ºè®®å™¨çš„æŒ‡å¯¼åŸåˆ™"><a href="#_2-æœç´¢å»ºè®®å™¨çš„æŒ‡å¯¼åŸåˆ™" class="header-anchor">#</a> 2. æœç´¢å»ºè®®å™¨çš„æŒ‡å¯¼åŸåˆ™</h2> <p>è¿™é‡Œï¼Œæˆ‘ä»¬ç»™å‡ºå¦‚ä¸‹<strong>æœç´¢è”æƒ³è¯æŒ‡å¯¼åŸåˆ™</strong>ï¼š</p> <ol><li>æœç´¢è”æƒ³è¯çš„ä¸ªæ•°æ˜¯<strong>éå¸¸æœ‰é™</strong>çš„ï¼Œæ‰€ä»¥å¿…é¡»å°½é‡æœ‰æ•ˆ</li> <li>æœç´¢è”æƒ³è¯åº”è¯¥æ˜¯èƒ½å¤Ÿ<strong>æœ€è´´è¿‘ç”¨æˆ·</strong>æƒ³è¦çš„ç»“æœ</li> <li>æœç´¢è”æƒ³å‡ºæ¥çš„è¯åº”è¯¥æ˜¯èƒ½å¤Ÿ**99%**æœç´¢åˆ°å•†å“</li> <li>æœç´¢è”æƒ³è¯èƒ½å¤Ÿå¸®ç”¨æˆ·<strong>çº æ­£</strong>ä¸€äº›é”™è¯¯</li></ol> <h2 id="_3-æœç´¢å»ºè®®å™¨å®ç°åŠŸèƒ½"><a href="#_3-æœç´¢å»ºè®®å™¨å®ç°åŠŸèƒ½" class="header-anchor">#</a> 3.  æœç´¢å»ºè®®å™¨å®ç°åŠŸèƒ½</h2> <p>åœ¨è¿™éƒ¨åˆ†æˆ‘ä»¬ç»™å‡ºäº†æœç´¢å»ºè®®å™¨éœ€è¦å®ç°çš„åŠŸèƒ½ï¼Œè¿™éƒ¨åˆ†åŠŸèƒ½ä¸ä»…æ˜¯ç¨‹åºå‘˜éœ€è¦è€ƒè™‘èƒ½å¤Ÿå®ç°çš„åŠŸèƒ½ï¼Œä¹Ÿå¯ä»¥ç”¨äºæµ‹è¯•ç”¨äºè¿›è¡ŒéªŒè¯æœç´¢å»ºè®®å™¨çš„åŠŸèƒ½æ˜¯å¦èƒ½å¤Ÿæ»¡è¶³åŸºæœ¬çš„ä½¿ç”¨è¦æ±‚ã€‚</p> <p>å…·ä½“ä¾‹å­å¦‚ä¸‹ï¼š</p> <ol><li><p><code>è‹¹æœ</code>   =ã€‹ åœ¨Aå¸‚ï¼Œä¸åº”è¯¥å‡ºç°&quot;è‹¹æœé†‹&quot;ï¼Œåœ¨æ·±åœ³å’Œå¹¿å·åº”è¯¥å‡ºç°â€œè‹¹æœé†‹â€ï¼ˆ å› ä¸ºâ€œè‹¹æœé†‹â€åªåœ¨å¹¿å·å’Œæ·±åœ³æœ‰å–ï¼‰å³æœç´¢å»ºè®®è¯å…·æœ‰<strong>åŒºåŸŸæ€§</strong></p></li> <li><p><code>å¹³æœ</code>  =ã€‹ çº é”™æˆ&quot;è‹¹æœ&quot;ï¼Œå³æ‹¼éŸ³çº é”™</p></li> <li><p><code>PingGUO</code>=&gt; å‡ºç°è‹¹æœï¼Œå³å½’ä¸€åŒ–è¾“å…¥è¯</p></li> <li><p><code>pinguo</code> =ã€‹å‡ºç°è‹¹æœï¼Œå³åé¼»éŸ³çº é”™</p></li> <li><p><code>pg</code>  =&gt;  å‡ºç°pgå¼€å¤´çš„æ‹¼éŸ³çš„å‰ç¼€ï¼Œå³é¦–å­—æ¯è¿”å›</p></li> <li><p><code>è™¾n</code> =ã€‹ä¸åº”è¯¥å‡ºç°â€œé²œèŠ±â€ï¼Œå³ä¸èƒ½å°†è™¾nï¼Œè½¬æˆxianå»æŸ¥è¯¢</p></li> <li><p><code>è™¾r</code> =ã€‹ å‡ºç°â€œè™¾ä»â€ï¼Œå³æ±‰å­—å’Œé¦–å­—æ¯å¯å‡ºç°æ­£ç¡®çš„è¯</p></li> <li><p><code>é•¿få¥¶</code> =&gt; ä¸å‡ºç°ç»“æœï¼Œè¿™é‡Œä¸å‡ºç°æ˜¯å› ä¸ºè¦æ±‰å­—å’Œå­—æ¯è¦è¿ç€ï¼Œä¸èƒ½ä¸­é—´æ’å…¥å­—æ¯</p></li> <li><p><code>chanfu</code> <code>zhangfu</code>=ã€‹åº”è¯¥å¯ä»¥å‡ºç°â€œé•¿å¯Œâ€ï¼Œå³æ”¯æŒå¤šéŸ³å­—æœç´¢</p></li> <li><p><code>Kafeii</code> =ã€‹ å‡ºç°å’–å•¡ï¼ˆåŸºäºç¼–è¾‘è·ç¦»è¿›è¡Œçº æ­£ï¼Œæ¨èå¤§äº5ä¸ªå­—æ¯æ‰è¿›è¡Œï¼‰</p></li> <li><p><code>ç™½èåœ</code>ã€<code>ç™½ç½—åœ</code>  =ã€‹ åªå‡ºç°<code>ç™½èåœ</code>   çš‡ä¸Šçš‡  ç…Œä¸Šç…Œçš„é—®é¢˜ï¼Œå³å»ºè®®è¯åªå‡ºç°æ­£ç¡®çš„è¯</p></li> <li><p>å›—<code>=&gt; çº é”™æˆ</code>å£`ï¼Œå‡ºç°å£ç½©ç›¸å…³çš„åè¯ï¼Œå³æŠŠæ‰‹å†™é”™è¯¯çš„è¯èƒ½å¤Ÿçº æ­£è¿‡æ¥</p> <p><code>ç¥™</code> =&gt; çº é”™æˆ <code>è¢œ</code></p></li> <li><p><code>ç‰›å¥¶</code> =ã€‹ æ·±åœ³åœ°åŒºä¼šå‡ºç°&quot;ç‡•å¡˜ç‰›å¥¶&quot;ç›¸å…³ï¼Œé•¿æ²™åœ°åŒºå‡ºç°&quot;èŠ±å›­ç‰›å¥¶&quot;</p></li> <li><p><code>è˜‹æœ</code> =&gt;  ç¹ä½“å­—ä¹Ÿèƒ½å¤Ÿæœç´¢å‡ºç»“æœï¼Œè¿™ä¸ªä¹Ÿæ˜¯é€šè¿‡è¯å½’ä¸€åŒ–å¤„ç†</p></li></ol> <h2 id="_4-æœç´¢å»ºè®®è¯éœ€è¦è€ƒè™‘çš„å› ç´ "><a href="#_4-æœç´¢å»ºè®®è¯éœ€è¦è€ƒè™‘çš„å› ç´ " class="header-anchor">#</a> 4.  æœç´¢å»ºè®®è¯éœ€è¦è€ƒè™‘çš„å› ç´ </h2> <ol><li>å»ºè®®è¯çš„æ¥æºå¯ä»¥æ˜¯å•†å“çš„åˆ†ç±»åç§°ã€å“ç‰Œåç§°ã€çƒ­æœè¯ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€äº›ç»„åˆè¯ï¼Œè¿˜å¯ä»¥æ˜¯ä¸€äº›è‡ªå®šä¹‰æ·»åŠ çš„è¯ã€‚</li> <li>æœç´¢å»ºè®®è¯éœ€è¦è€ƒè™‘å»é‡ï¼Œæ¯”å¦‚ï¼šâ€œQQâ€å’Œ&quot;qq&quot;åº”è¯¥æ˜¯ç›¸åŒçš„ã€‚</li> <li>æœç´¢å»ºè®®è¯æ¯ä¸ªè¯å…³è”çš„å•†å“ä¸ªæ•°ï¼Œä¸ºäº†é¿å…å¯¹ç”¨æˆ·æœç´¢çš„å½±å“ã€‚å› æ­¤åœ¨å‡Œæ™¨æ‰§è¡Œï¼Œå¹¶ä¸”ä½¿ç”¨å•çº¿ç¨‹è°ƒç”¨ã€‚ï¼ˆä½¿ç”¨Multi search ä¸­çš„countï¼Œä»¥åŠæ‰¹é‡æ’å…¥ï¼‰</li> <li>æœç´¢å»ºè®®æœåŠ¡ï¼Œæ€è·¯è¿˜æ˜¯å…ˆæŸ¥ç¼“å­˜ï¼Œæ˜¯å¦åŒ¹é…åˆ°ç¼“å­˜çš„è®°å½•ï¼Œå¦‚æœåŒ¹é…åˆ™ç›´æ¥è¿”å›ã€‚å¦åˆ™å»esä¸­è¿›è¡ŒæŸ¥è¯¢ã€‚</li> <li>è¿”å›ç»“æœä¸ºç©ºçš„ç»“æœï¼Œæ­¤æ—¶éœ€è¦å¢åŠ æ‹¼å†™çº é”™çš„å¤„ç†ã€‚(å¯ä»¥å»ºä¸€ä¸ªçº é”™è¡¨)</li></ol> <h2 id="_5-åŸºäºes-çš„æœç´¢å»ºè®®å™¨çš„ç”¨æ³•"><a href="#_5-åŸºäºes-çš„æœç´¢å»ºè®®å™¨çš„ç”¨æ³•" class="header-anchor">#</a> 5. åŸºäºES çš„æœç´¢å»ºè®®å™¨çš„ç”¨æ³•</h2> <blockquote><p>suggesteråŸºæœ¬åŸç†æ˜¯å°†è¾“å…¥çš„æ–‡æœ¬åˆ†è§£ä¸ºtokenï¼Œç„¶ååœ¨ç´¢å¼•çš„å­—å…¸é‡ŒæŸ¥æ‰¾ç›¸ä¼¼çš„termå¹¶è¿”å›ã€‚æ ¹æ®ä½¿ç”¨åœºæ™¯çš„ä¸åŒï¼Œåœ¨Elasticsearché‡Œé¢æ¶‰åŠäº†4ç§ç±»åˆ«çš„suggesterï¼Œåˆ†åˆ«æ˜¯ï¼š</p> <ol><li>Term Suggester</li> <li>Phrase Suggester</li> <li>Completion Suggester</li> <li>Context Suggester</li></ol></blockquote> <p>æˆ‘ä»¬ä¾æ¬¡è®²è§£ä¸‹ï¼Œä¸Šè¿°4ä¸­ç±»åˆ«çš„suggesterçš„ç”¨æ³•ã€‚</p> <ol><li>Term Suggester</li></ol> <p>ä¸‰ç§suggest_mode:</p> <p>missing:å¦‚æœè¯å­˜åœ¨ï¼Œåˆ™ä¸ç»™å‡ºç›¸ä¼¼é¡¹ã€‚</p> <p>popular :å¦‚æœè¯å­˜åœ¨ï¼Œä¸”æœ‰ç›¸ä¼¼é¡¹ï¼Œåˆ™ç»™å‡ºã€‚</p> <p>always:ä¸ç®¡tokenæ˜¯å¦å­˜åœ¨è¯å…¸é‡Œï¼Œéƒ½ç»™å‡ºç›¸ä¼¼é¡¹ã€‚</p> <p>å°è¯•äº†ä¸‹ï¼Œè²Œä¼¼term suggesterå¯¹äºä¸­æ–‡æ˜¯ä¸é€‚ç”¨çš„</p> <p>ä¸‹é¢è¿™æ®µæ˜¯ä¸­æ–‡çš„ä»£ç ï¼š</p> <div class="language- extra-class"><pre class="language-text"><code>DELETE blogs
PUT /blogs/
{
  &quot;mappings&quot;: {
    &quot;tech&quot;: {
      &quot;properties&quot;: {
        &quot;body&quot;: {
          &quot;type&quot;: &quot;text&quot;,
          &quot;analyzer&quot;: &quot;ik_max_word&quot;,
          &quot;search_analyzer&quot;: &quot;ik_smart&quot;
        }
      }
    }
  }
}

POST _bulk/?refresh=true
{ &quot;index&quot; : { &quot;_index&quot; : &quot;blogs&quot;, &quot;_type&quot; : &quot;tech&quot; } }
{ &quot;body&quot;: &quot;é•¿å¯Œç‰›å¥¶&quot;}
{ &quot;index&quot; : { &quot;_index&quot; : &quot;blogs&quot;, &quot;_type&quot; : &quot;tech&quot; } }
{ &quot;body&quot;: &quot;é•¿å¯Œå¥¶&quot;}
{ &quot;index&quot; : { &quot;_index&quot; : &quot;blogs&quot;, &quot;_type&quot; : &quot;tech&quot; } }
{ &quot;body&quot;: &quot;å¥¶ç²‰&quot;}
{ &quot;index&quot; : { &quot;_index&quot; : &quot;blogs&quot;, &quot;_type&quot; : &quot;tech&quot; } }
{ &quot;body&quot;: &quot;ç‰›å¥¶&quot;}

POST _bulk/?refresh=true
{ &quot;index&quot; : { &quot;_index&quot; : &quot;blogs&quot;, &quot;_type&quot; : &quot;tech&quot; } }
{ &quot;body&quot;: &quot;niunai&quot;}


POST _analyze
{
  &quot;analyzer&quot;: &quot;ik_smart&quot;, 
  &quot;text&quot;: [
    &quot;é•¿å¯Œç‰›å¥¶&quot;,
    &quot;é•¿å¯Œå¥¶&quot;,
    &quot;å¥¶ç²‰&quot;,
    &quot;ç‰›å¥¶&quot;
  ]
}

POST /blogs/_search
{ 
  &quot;suggest&quot;: {
    &quot;my-suggestion&quot;: {
      &quot;text&quot;: &quot;niunai&quot;,
      &quot;term&quot;: {
        &quot;suggest_mode&quot;: &quot;popular&quot;,
        &quot;field&quot;: &quot;body&quot;
      }
    }
  }
}
</code></pre></div><ol start="2"><li>Phrase Suggester</li></ol> <p>åœ¨Term Suggesterçš„åŸºç¡€ä¹‹ä¸Šï¼Œä¼šè€ƒè™‘å¤šä¸ªTermä¹‹é—´çš„å…³ç³»ï¼Œæ¯”å¦‚ï¼šæ˜¯å¦åŒæ—¶å‡ºç°åœ¨ç´¢å¼•çš„åŸæ–‡ä¸­ï¼Œç›¸é‚»ç¨‹åº¦ï¼Œä»¥åŠè¯é¢‘ï¼Œ</p> <ol start="3"><li>Completion Suggester</li></ol> <p>ä¸»è¦åº”ç”¨åœºæ™¯æ˜¯è‡ªåŠ¨è‡ªåŠ¨è¡¥å…¨ï¼Œæ¯è¾“å…¥ä¸€ä¸ªå­—ç¬¦ï¼Œå³æ—¶å‘é€ä¸€æ¬¡è¯·æ±‚åˆ°æœåŠ¡ç«¯æŸ¥è¯¢å¯èƒ½çš„åŒ¹é…é¡¹ï¼Œå°†æ•°æ®å˜æˆFSTï¼Œåªèƒ½ç”¨äº<strong>å‰ç¼€åŒ¹é…</strong>ï¼Œè¿™ä¹Ÿæ˜¯Completion Suggesterçš„å±€é™æ‰€åœ¨ã€‚ä¸ºäº†ä½¿ç”¨Completion Suggester,å­—æ®µçš„ç±»å‹éœ€è¦ä¸“é—¨å®šä¹‰ã€‚</p> <p>æœ‰ä¸¤ä¸ªå‚æ•°ï¼š</p> <p>preserve_separatorsï¼š</p> <p>preserve_position_incrementsï¼š</p> <p>request_cache=true æŸ¥è¯¢ä»5mså˜æˆ1ms</p> <h2 id="_6-è‡ªå®šä¹‰æœç´¢å»ºè®®å™¨"><a href="#_6-è‡ªå®šä¹‰æœç´¢å»ºè®®å™¨" class="header-anchor">#</a> 6.  è‡ªå®šä¹‰æœç´¢å»ºè®®å™¨</h2> <p>åŸºäºES suggester completionï¼Œå†…éƒ¨ç”¨FSTï¼ˆFinite State Transducerï¼‰,åªèƒ½ç”¨äºå‰ç¼€åŒ¹é…ï¼Œè¿™ä¹Ÿæ˜¯Completion Suggesterçš„å±€é™æ‰€åœ¨ã€‚æˆ‘ä»¬ç°åœ¨çš„æœç´¢è”æƒ³è¯å¯ä»¥ä¸­ç¼€åŒ¹é…ï¼Œæ˜¯å› ä¸ºä½¿ç”¨äº†ngramï¼ˆmin_gram: 1, max_gram: 10ï¼‰ï¼Œåœ¨å…¥åº“çš„æ—¶å€™æŠŠæ‰€æœ‰çš„è¯è¿›è¡Œæ‹†åˆ†ã€‚</p> <blockquote><p>æ¯”å¦‚ï¼šé•¿å¯Œç‰›å¥¶ï¼Œä¼šæ‹†æˆâ€œé•¿ã€å¯Œã€ç‰›ã€å¥¶ã€é•¿å¯Œã€å¯Œç‰›ã€ç‰›å¥¶ã€é•¿å¯Œç‰›ã€å¯Œç‰›å¥¶ã€é•¿å¯Œç‰›å¥¶â€</p></blockquote> <p>å¦å¤–ï¼Œä½¿ç”¨äº†ES çš„æ‹¼éŸ³åˆ†è¯å™¨ï¼Œæ”¯æŒç”¨æˆ·è¾“å…¥æ‹¼éŸ³æœç´¢ç›¸å…³çš„è”æƒ³è¯ï¼Œä»¥åŠå°†è¾“å…¥çš„ä¸­æ–‡è¯ä¹Ÿåˆ©ç”¨å¯¹åº”çš„æ‹¼éŸ³è¿›è¡ŒåŒ¹é…ã€‚</p> <p>åŸºäºESï¼Œä¸ä½¿ç”¨ESè‡ªå¸¦çš„æœç´¢å»ºè®®å™¨Suggesterï¼Œæˆ‘ä»¬æ‰“ç®—è‡ªå·±æ„å»ºä¸€ä¸ªç”¨äºæœç´¢è”æƒ³è¯çš„ç´¢å¼•ï¼Œä¸æ—§æœ‰çš„æœç´¢è”æƒ³è¯å¯¹æ¯”å¦‚ä¸‹ï¼š</p> <h3 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="header-anchor">#</a> ä¼˜ç‚¹</h3> <ol><li>ç´¢å¼•æ›´è½»é‡çº§ã€‚å› ä¸ºç»“æ„ç®€å•ï¼ŒåŒæ ·çš„<strong>2ä¸‡</strong>æ¡æ•°æ®ï¼Œæ—§çš„æœç´¢è”æƒ³è¯ç´¢å¼•å ç”¨<code>70M</code>ï¼Œè€Œ æ–°çš„æœç´¢è”æƒ³è¯å ç”¨ç©ºé—´ä¸º<code>15M</code></li> <li>æ’æŸ¥é—®é¢˜æ›´æ–¹ä¾¿ï¼Œå¯¹äºå…¥åº“çš„è¯å¦‚ä½•è¿›è¡Œæ‹†åˆ†ï¼Œæ˜¯é€šè¿‡æˆ‘ä»¬è‡ªèº«çš„åº”ç”¨ç¨‹åºä»£ç è¿›è¡Œæ§åˆ¶ï¼Œè€Œä¸”æ‹†åˆ†ç»“æœç›´æ¥å¯ä»¥åœ¨esä¸­è¿›è¡Œæ•°æ®æŸ¥çœ‹</li> <li>å¯æ“ä½œç©ºé—´æ›´å¤§ï¼Œå¯ä»¥è‡ªä¸»ç¡®å®šï¼Œæ€æ ·çš„è¯å¯ä»¥æŸ¥æ‰¾å…¶ä»–ç›¸å…³çš„è¯</li></ol> <h3 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="header-anchor">#</a> ç¼ºç‚¹</h3> <ol><li>æœ‰ä¸€å®šä»£ç ç»´æŠ¤æˆæœ¬</li> <li>åˆ†è¯ç­‰åŸç†ä¸ESæœç´¢å¼•æ“çš„åˆ†è¯ç­‰åŸç†è§£è€¦ï¼Œå¯èƒ½ä¸åˆ©äºç»´æŠ¤</li> <li>ä¸æœç´¢è”æƒ³è¯å¯¹æ¯”ï¼Œæ•°æ®ä¸æ˜¯æ”¾åœ¨ç¼“å­˜ä¸­(é€šè¿‡request ä¸­cacheè¿›è¡Œè§£å†³)</li></ol> <p>æˆ‘ä»¬çš„æ–¹æ¡ˆï¼Œmappingæ„å»ºå¦‚ä¸‹ï¼š</p> <div class="language- extra-class"><pre class="language-text"><code>PUT search_suggester?include_type_name=false
{
  &quot;aliases&quot;: {
    &quot;alias_search_suggester&quot;: {
    }
  },
  &quot;settings&quot;: {
    &quot;number_of_shards&quot;: 3,
    &quot;number_of_routing_shards&quot;: 9,
    &quot;number_of_replicas&quot;: 0,
    &quot;refresh_interval&quot;: &quot;1s&quot;,
    &quot;index&quot;:{
        &quot;sort.field&quot;:[&quot;frequency&quot;, &quot;sku_num&quot;],
        &quot;sort.order&quot;:[&quot;desc&quot;, &quot;desc&quot;]
    },
    &quot;index.search.slowlog.threshold.query.trace&quot;: &quot;20ms&quot;,
    &quot;index.search.slowlog.threshold.query.debug&quot;: &quot;100ms&quot;,
    &quot;index.search.slowlog.threshold.query.info&quot;: &quot;250ms&quot;,
    &quot;index.search.slowlog.threshold.query.warn&quot;: &quot;500ms&quot;,
    &quot;index.search.slowlog.threshold.fetch.trace&quot;: &quot;20ms&quot;,
    &quot;index.search.slowlog.threshold.fetch.debug&quot;: &quot;100ms&quot;,
    &quot;index.search.slowlog.threshold.fetch.info&quot;: &quot;250ms&quot;,
    &quot;index.search.slowlog.threshold.fetch.warn&quot;: &quot;500ms&quot;,
    &quot;index.indexing.slowlog.threshold.index.trace&quot;: &quot;20ms&quot;,
    &quot;index.indexing.slowlog.threshold.index.debug&quot;: &quot;100ms&quot;,
    &quot;index.indexing.slowlog.threshold.index.info&quot;: &quot;250ms&quot;,
    &quot;index.indexing.slowlog.threshold.index.warn&quot;: &quot;500ms&quot;
  },
  &quot;mappings&quot;: {
    &quot;_routing&quot;: {
      &quot;required&quot;: true
    },
    &quot;dynamic&quot;:&quot;strict&quot;,
    &quot;properties&quot;: {
      &quot;query&quot;: {
        &quot;type&quot;: &quot;keyword&quot;,
         &quot;doc_values&quot;: false,
         &quot;norms&quot;: false 
      },
      &quot;city_zip&quot;: {
        &quot;type&quot;: &quot;keyword&quot;,
        &quot;doc_values&quot;: false,
        &quot;norms&quot;: false
      },
      &quot;term_prefixs&quot;: {
        &quot;type&quot;: &quot;keyword&quot;,
        &quot;doc_values&quot;: false,
        &quot;norms&quot;: false,
        &quot;copy_to&quot;: &quot;search_suggester_all&quot;
      },
      &quot;term_pinyin&quot;: {
        &quot;type&quot;: &quot;keyword&quot;,
        &quot;doc_values&quot;: false,
        &quot;norms&quot;: false,
        &quot;copy_to&quot;: &quot;search_suggester_all&quot;
      },
      &quot;term_shouzimu&quot;: {
        &quot;type&quot;: &quot;keyword&quot;,
        &quot;doc_values&quot;: false,
        &quot;norms&quot;: false,
        &quot;copy_to&quot;: &quot;search_suggester_all&quot;
      },
      &quot;pinyin_prefixs&quot;: {
        &quot;type&quot;: &quot;keyword&quot;,
        &quot;doc_values&quot;: false,
        &quot;norms&quot;: false,
        &quot;copy_to&quot;: &quot;search_suggester_all&quot;
      },
      &quot;shouzimu_prefixs&quot;: {
        &quot;type&quot;: &quot;keyword&quot;,
        &quot;doc_values&quot;: false,
         &quot;norms&quot;: false,
         &quot;copy_to&quot;: &quot;search_suggester_all&quot;
      },
      &quot;frequency&quot;: {
        &quot;type&quot;: &quot;long&quot;
      },
      &quot;sku_num&quot;: {
        &quot;type&quot;: &quot;long&quot;
      },
      &quot;search_suggester_all&quot;: {
        &quot;type&quot;: &quot;keyword&quot;,
        &quot;doc_values&quot;: false,
        &quot;norms&quot;: false
      }
    }
  }
}
</code></pre></div><p>è¯´æ˜ï¼š</p> <ol><li>term_prefixs : ä¸­æ–‡è¯å‰ç¼€</li> <li>term_pinyinï¼šä¸­æ–‡è¯æ‹¼éŸ³</li> <li>term_shouzimuï¼šä¸­æ–‡è¯é¦–å­—æ¯å‰ç¼€</li> <li>pinyin_prefixsï¼šæ‹¼éŸ³å‰ç¼€</li> <li>shouzimu_prefixsï¼šé¦–å­—æ¯å‰ç¼€</li> <li>...</li></ol> <p>å°†ç›¸åº”çš„è¯ï¼Œikæ‹†è¯ï¼Œæ‹¼éŸ³æ‹†è¯ï¼Œç»„åˆä¸­æ–‡å’Œæ‹¼éŸ³ç­‰ï¼ŒæŒ‰ç…§ä¸Šè¿°éœ€è¦çš„è§„åˆ™ï¼Œè¿›è¡Œæ‹†åˆ†ï¼Œç„¶åæ’å…¥åˆ°ç´¢å¼•ä¸­ã€‚</p> <p>æŸ¥è¯¢çš„æ—¶å€™ï¼Œå¯¹äºESçš„æŸ¥è¯¢å¯ä»¥åªæŸ¥è¯¢search_suggester_allè¿™ä¸ªå­—æ®µå•¦ã€‚</p> <p><code>æŸ¥è¯¢DSLè¯­å¥å¦‚ä¸‹ï¼š</code></p> <div class="language- extra-class"><pre class="language-text"><code>GET alias_search_suggester/_search
{
    &quot;from&quot;: 0,
    &quot;size&quot;: 10,
    &quot;query&quot;: {
        &quot;bool&quot;: {
            &quot;filter&quot;: [
                {
                    &quot;term&quot;: {
                        &quot;city_zip&quot;: {
                            &quot;value&quot;: &quot;400100&quot;,
                            &quot;boost&quot;: 1
                        }
                    }
                },
                {
                    &quot;term&quot;: {
                        &quot;search_suggester_all&quot;: {
                            &quot;value&quot;: &quot;èŠ±å›­&quot;,
                            &quot;boost&quot;: 1
                        }
                    }
                }
            ],
            &quot;adjust_pure_negative&quot;: true,
            &quot;boost&quot;: 1
        }
    },
    &quot;_source&quot;: {
        &quot;includes&quot;: [
            &quot;query&quot;,
            &quot;sku_num&quot;
        ],
        &quot;excludes&quot;: []
    },
    &quot;sort&quot;: [
        {
            &quot;frequency&quot;: {
                &quot;order&quot;: &quot;desc&quot;
            }
        },
        {
            &quot;sku_num&quot;: {
                &quot;order&quot;: &quot;desc&quot;
            }
        }
    ],
    &quot;track_total_hits&quot;: false
}
</code></pre></div><p>ä½¿ç”¨åˆ°çš„å·¥å…·åŒ…æœ‰ï¼š</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;!-- ikåˆ†è¯ --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.apache.lucene&lt;/groupId&gt;
    &lt;artifactId&gt;lucene-core&lt;/artifactId&gt;
    &lt;version&gt;8.0.0&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.apache.lucene&lt;/groupId&gt;
    &lt;artifactId&gt;lucene-queryparser&lt;/artifactId&gt;
    &lt;version&gt;8.0.0&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.apache.lucene&lt;/groupId&gt;
    &lt;artifactId&gt;lucene-analyzers-common&lt;/artifactId&gt;
    &lt;version&gt;8.0.0&lt;/version&gt;
&lt;/dependency&gt;

&lt;!-- ç¹ä½“è½¬ç®€ä½“ --&gt;
&lt;dependency&gt;
		&lt;groupId&gt;com.github.houbb&lt;/groupId&gt;
		&lt;artifactId&gt;opencc4j&lt;/artifactId&gt;
	&lt;version&gt;1.0.2&lt;/version&gt;
&lt;/dependency&gt;

&lt;!-- æ±‰å­—è½¬æ‹¼éŸ³ --&gt;
&lt;dependency&gt;
		&lt;groupId&gt;com.belerweb&lt;/groupId&gt;
		&lt;artifactId&gt;pinyin4j&lt;/artifactId&gt;
		&lt;version&gt;2.5.0&lt;/version&gt;
&lt;/dependency&gt;
</code></pre></div><h2 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="header-anchor">#</a> å‚è€ƒæ–‡çŒ®</h2> <ol><li>https://blog.csdn.net/wwd0501/article/details/80595201</li> <li>https://www.jianshu.com/p/9e2c6a8e1b54  (è¯¥ç¯‡æ–‡æ¡£è¾ƒè¯¦ç»†çš„ä»‹ç»æœç´¢ä¸­æ–‡æœç´¢å»ºè®®è¯çš„å®ç°æ–¹å¼)</li></ol></div></div> <div class="page-slot page-slot-bottom">
  <div class="wwads-cn wwads-horizontal pageB" data-id="136" style="width:100%;max-height:80px;min-height:auto;"></div>
  <style>
    .pageB img{width:80px!important;}
    .wwads-horizontal .wwads-text, .wwads-content .wwads-text{line-height:1;}
  </style>
  </div> <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡æ›´æ–°:</span> <span class="time">2023/03/22, 15:21:20</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/wow4j/pages/3343c6/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">å‚ç›´ç”µå•†æœç´¢æ³¨æ„ç‚¹</div></a> <a href="/wow4j/pages/e0e231/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">ElasticSearch ä¸´æ—¶</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        â†
        <a href="/wow4j/pages/3343c6/" class="prev">å‚ç›´ç”µå•†æœç´¢æ³¨æ„ç‚¹</a></span> <span class="next"><a href="/wow4j/pages/e0e231/">ElasticSearch ä¸´æ—¶</a>â†’
      </span></p></div></div></div> <!----></main></div> <div class="footer"><div class="icons"><a href="mailto:461330266@qq.com" title="å‘é‚®ä»¶" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/timchen525" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/playlist?id=755597173" title="å¬éŸ³ä¹" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="æœ¬ç«™ä¸»é¢˜">Vdoing</a> 
    | Copyright Â© 2022-2023
    <span>timchen525 | MIT License</span></div> <div class="buttons"><div title="è¿”å›é¡¶éƒ¨" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="å»è¯„è®º" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="ä¸»é¢˜æ¨¡å¼" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          è·Ÿéšç³»ç»Ÿ
        </li><li class="iconfont icon-rijianmoshi">
          æµ…è‰²æ¨¡å¼
        </li><li class="iconfont icon-yejianmoshi">
          æ·±è‰²æ¨¡å¼
        </li><li class="iconfont icon-yuedu">
          é˜…è¯»æ¨¡å¼
        </li></ul></div></div> <!----> <!----> <div class="custom-html-window custom-html-window-rb" style="display:;"><div class="custom-wrapper"><span class="close-but">Ã—</span> <div>
    <div class="wwads-cn wwads-vertical windowRB" data-id="136" style="max-width:160px;
    min-width: auto;min-height:auto;"></div>
    <style>
      .windowRB{ padding: 0;}
      .windowRB .wwads-img{margin-top: 10px;}
      .windowRB .wwads-content{margin: 0 10px 10px 10px;}
      .custom-html-window-rb .close-but{
        display: none;
      }
    </style>
  </div></div></div></div><div class="global-ui"><div></div></div></div>
    <script src="/wow4j/assets/js/app.9c6a4848.js" defer></script><script src="/wow4j/assets/js/2.290edd30.js" defer></script><script src="/wow4j/assets/js/43.32f5429c.js" defer></script>
  </body>
</html>
